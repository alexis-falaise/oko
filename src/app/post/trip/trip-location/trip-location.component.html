<form [formGroup]="location" (ngSubmit)="submit()" autocomplete="off" novalidate>
    <div class="form-group">
        <input type="text" name="city" formControlName="city" (focus)="cityFocus = true" (blur)="cityFocus = false"
               placeholder="Ville"
               autocomplete="off"
               [ngClass]="{'form-control': !cityReadonly, 'form-control-plaintext': cityReadonly}"
               [readonly]="cityReadonly"
               [class.is-invalid]="location.controls.city.errors?.required
               && location.controls.city.touched" required>
        <small class="text-muted" *ngIf="cityFocus">Indiquez le nom de la ville en Anglais pour obtenir une suggestion d'aéroport</small>
    </div>
    <mat-form-field class="form-group trip-location-hybrid-group">
        <input type="text" placeholder="Aéroport" #airport (click)="fetchMatchingAirports(location.controls.city.value)"
               matInput formControlName="airport" [matAutocomplete]="auto">
        <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayAirport">
            <mat-option *ngFor="let airport of filteredAirports" [value]="airport">
            {{ airport.name }} |
            <small>{{ airport.country }}</small>
            </mat-option>
        </mat-autocomplete>
    </mat-form-field>
    <div class="form-row">
        <div class="form-group col-10 col-md-7">
          <input type="text" name="date" formControlName="date"
                 autocomplete="off"
                 [matDatepicker]="picker"
                 [min]="minDate || today"
                 [ngClass]="{'form-control': !dateReadonly, 'form-control-plaintext': dateReadonly}"
                 [readonly]="dateReadonly"
                 placeholder="Date">
        </div>
        <div class="form-group col-2 col-md-2">
            <mat-datepicker-toggle [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker touchUi #picker></mat-datepicker>
        </div>
        <div class="form-group col-12 col-md-3">
          <input name="time" formControlName="time"
                autocomplete="off"
                [class.is-invalid]="location.controls.time.errors?.invalid"
                [ngClass]="{'form-control': !timeReadonly, 'form-control-plaintext': timeReadonly}"
                [readonly]="timeReadonly"
                placeholder="Heure">
        </div>
        <input type="submit" style="position: absolute; left: -9999px" tabindex="-1">
    </div>
</form>
